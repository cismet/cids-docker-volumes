version: '2'
services:
    cids-integration-base:
      image: cismet/cids-integration-base:latest
      container_name: cidsreference_cids-integration-base
      ports:
        - "5434:5432"
      volumes:
        - cids-integration-base:/data
        - ~/cids-docker-volumes/cids-reference/cids-integration-base/import/:/import/cidsIntegrationBase/
    cids-server:
      image: cismet/cids-server
      container_name: cidsreference_cids-server
      links:
        - "cids-integration-base:cids-integration-base"
      ports:
        - "9986:9986"
      environment:
        LOG4J_HOST: 172.17.0.1
        CIDS_ACCOUNT_EXTENSION: CidsReference
      volumes:
        - cids-server:/data
        - ~/cids-docker-volumes/cids-reference/cids-server/import/:/import/cids-server/
    cids-server-rest-legacy:
      image: cismet/cids-server-rest-legacy
      container_name: cidsreference_cids-cids-server-rest-legacy
      links:
        - "cids-server:cids-server"
      ports:
        - "8890:8890"
      environment:
        LOG4J_HOST: 172.17.0.1
        CIDS_ACCOUNT_EXTENSION: CidsReference
      volumes_from:
        - cids-server
      volumes:
        - ~/cids-docker-volumes/cids-reference/cids-server-rest-legacy/import/:/import/cids-server-rest-legacy/
volumes:
  cids-integration-base:
    driver: local
  cids-server:
    driver: local
  cids-server-rest-legacy:
    driver: local